(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t,n){e.exports={MemeCreator:"MemeCreator__MemeCreator__KMn3A",Inner:"MemeCreator__Inner__3XUOU"}},120:function(e,t,n){e.exports={MemeList:"MemeList__MemeList__1WG56",Img:"MemeList__Img__1gxBS"}},162:function(e,t,n){e.exports={Header:"Header__Header__qj6EO"}},166:function(e,t,n){e.exports={MemeLists:"MemeLists__MemeLists__4Xivv"}},171:function(e,t,n){e.exports={Layout:"Layout__Layout__1SGjM"}},177:function(e,t,n){e.exports=n(234)},182:function(e,t,n){},192:function(e,t){},194:function(e,t){},214:function(e,t){},217:function(e,t){},234:function(e,t,n){"use strict";n.r(t);var a=n(15),o=n.n(a),r=n(161),s=n.n(r),m=(n(182),n(162)),c=n.n(m),l=function(){return o.a.createElement("div",{className:c.a.Header},o.a.createElement("h1",{style:{color:"white"}},"Meme Voting"))},i=n(7),u=n(20),d=n(163),f=n(164),p=n(173),M=n(165),h=n(174),v=n(119),g=n.n(v),C=function(e){return o.a.createElement("div",{className:g.a.MemeCreator},o.a.createElement("form",null,o.a.createElement("div",{className:g.a.Inner},o.a.createElement("input",{type:"text",name:"meme-url",onChange:e.urlChanged,value:e.value.imageUrl,placeholder:"Input Meme Url"}),o.a.createElement("input",{type:"text",name:"username",onChange:e.nameChanged,value:e.value.name,placeholder:"Username"}))),o.a.createElement("button",{onClick:e.createMemeClicked},"Create Meme"))},_=n(166),b=n.n(_),w=n(120),O=n.n(w),E=function(e){return o.a.createElement("div",{className:O.a.MemeList},o.a.createElement("p",{style:{fontWeight:"bold",fontSize:"15px"}},e.name),o.a.createElement("img",{className:O.a.Img,src:e.image,alt:e.name}),o.a.createElement("p",null,e.aettosAmount,"  Aettos"),o.a.createElement("input",{type:"number",name:"vote-amount",placeholder:"Amount of aeons",onChange:e.changed,value:e.value}),o.a.createElement("button",{onClick:e.clicked},"Vote"))},y=function(e){return o.a.createElement("div",{className:b.a.MemeLists},e.listOfMemes.sort(function(e,t){return t.aettosAmount-e.aettosAmount}).map(function(t){return o.a.createElement(E,{key:t.id,name:t.name,image:t.image,aettosAmount:t.aettosAmount,value:t.value,changed:e.inputChanged.bind(void 0,t.id),clicked:e.voteClicked.bind(void 0,t.id)})}))},I=n(172),k='\ncontract MemeVote = \n\n    record meme = {\n      creatorAddress: address,\n      voteCount: int,\n      name: string,\n      url: string\n      }\n    \n    record state = { \n      memes: map(int, meme),\n      memesLength: int\n      }\n\n    entrypoint init() = { \n      memes = {},\n      memesLength = 0\n      }\n\n    entrypoint getMeme(index: int): meme = \n      switch(Map.lookup(index, state.memes))\n        None => abort("Index not found")\n        Some(y) => y\n    \n    stateful entrypoint setMeme(memeUrl: string, uname: string) =\n      let meme = { creatorAddress = Call.caller, name = uname, url = memeUrl, voteCount = 0}\n      let id = getMemesLength() + 1\n      put(state { memes[id] = meme, memesLength = id} )\n    \n\n    entrypoint getMemesLength(): int =\n      state.memesLength\n    \n    stateful entrypoint voteMeme(index: int) = \n      let meme = getMeme(index)\n      Chain.spend(meme.creatorAddress, Call.value)\n      let updatedVoteCount = meme.voteCount + Call.value\n      let updatedMemes = state.memes{ [index].voteCount = updatedVoteCount }\n      put(state { memes = updatedMemes })\n',x=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(p.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(o)))).state={listOfMemes:null,newMemeInputs:{name:"",imageUrl:""},client:null,contract_address:"ct_2cMdAVT6HyxZhFsvYvojxrDuMnvuPGLhEPPq65HEcuPoUi7JDE"},n.callStatic=function(e,t,a){return n.state.client.getContractInstance(k,{contractAddress:e}).then(function(e){return e.call(t,a,{callStatic:!0})}).then(function(e){return e.decode()}).then(function(e){return e})},n.contractCall=function(e,t,a,o){return n.state.client.getContractInstance(k,{contractAddress:e}).then(function(e){return e.call(t,a,{amount:o})}).then(function(e){return e})},n.voteHandler=function(e){n.setState(function(t,a){var o=Object(u.a)(t.listOfMemes),r={listOfMemes:Object(u.a)(t.listOfMemes)};console.log(r);var s=o.findIndex(function(t){return t.id===e}),m=Object(i.a)({},o[s]);return m.aettosAmount=t.listOfMemes[s].aettosAmount+t.listOfMemes[s].value,o[s]=m,n.contractCall(n.state.contract_address,"voteMeme",[s],t.listOfMemes[s].value).then(function(e){console.log(e),r={listOfMemes:o}}).catch(function(e){return console.log(e)}),console.log(r),r})},n.onChangeHandler=function(e,t){var a=Object(u.a)(n.state.listOfMemes),o=a.findIndex(function(t){return t.id===e}),r=Object(i.a)({},a[o]);r.value=+t.target.value,a[o]=r,n.setState({listOfMemes:a})},n.newNameHandler=function(e){var t=Object(i.a)({},n.state.newMemeInputs);t.name=e.target.value,n.setState({newMemeInputs:t})},n.newUrlHandler=function(e){var t=Object(i.a)({},n.state.newMemeInputs);t.imageUrl=e.target.value,n.setState({newMemeInputs:t})},n.createMemeHandler=function(){var e=n.state.newMemeInputs.imageUrl,t=n.state.newMemeInputs.name;if(e||t){var a=Object(u.a)(n.state.listOfMemes),o={id:n.state.newMemeInputs.name+(100*Math.random()+1),name:n.state.newMemeInputs.name,image:n.state.newMemeInputs.imageUrl,aettosAmount:0,value:""};a.push(o),n.contractCall(n.state.contract_address,"setMeme",[e,t],0).then(function(e){console.log(e),n.setState({listOfMemes:a})}).catch(function(e){return console.log(e)})}},n}return Object(h.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(I.a)({url:"https://sdk-testnet.aepps.com",internalUrl:"https://sdk-testnet.aepps.com",networkId:"ae_uat",keypair:{publicKey:"ak_SmB9dDDkbs7Y4Lb11oySsyxwmxot6s7dzJaAPEefKwRbTQ551",secretKey:"c7511c7de81142e633f89609c09898486cd02f6cbff7666030bdcb3c0866b7753a7eb5035c83a4a7daf4d4b03558cef548ee882a15d0131fec29382a4eb91f25"},compilerUrl:"https://compiler.aepps.com",nativeMode:!0}).then(function(t){e.setState({client:t}),e.callStatic(e.state.contract_address,"getMemesLength",[]).then(function(t){for(var n=[],a=function(t){e.callStatic(e.state.contract_address,"getMeme",[t]).then(function(a){var o={id:100*Math.random()+t,name:a.name,image:a.url,aettosAmount:a.voteCount,value:""};n.push(o),console.log(n),e.setState({listOfMemes:n})})},o=1;o<=t;o++)a(o)})})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(C,{value:this.state.newMemeInputs,createMemeClicked:this.createMemeHandler,urlChanged:this.newUrlHandler,nameChanged:this.newNameHandler}),this.state.listOfMemes?o.a.createElement(y,{listOfMemes:this.state.listOfMemes,inputChanged:this.onChangeHandler,voteClicked:this.voteHandler}):null)}}]),t}(a.Component),L=n(171),A=n.n(L),j=function(){return o.a.createElement("div",{className:A.a.Layout},o.a.createElement(l,null),o.a.createElement(x,null))};var S=function(){return o.a.createElement(j,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[177,1,2]]]);
//# sourceMappingURL=main.5e4f4ba8.chunk.js.map